.EQU REPEAT = 100
.EQU MASK = (1<<6)
.INCLUDE "M88DEF.INC"
.ORG 0
	RJMP RESET
.ORG 0x20
	RJMP TIM0_COMPA
.ORG 0x100
	RESET:
	LDI R16, HIGH(RAMEND)
	OUT SPH, R16
	LDI R16, LOW(RAMEND)
	OUT SPL, R16
	LDI R16, MASK
	LDI R17, MASK
	LDI R18, REPEAT
	SBI DDRD, 6
	SBI PORTD, 6
	RCALL INTRUP_10ms
	RJMP MAIN
; Setup Periodo 10ms
INTRUP_10ms:
	LDI R19, (1<<OCIE0A)
	STS TIMSK0, R19
	LDI R19, 156
	OUT OCR0A, R19
	LDI R19, (1<<WGM01)
	OUT TCCR0A, R19
	LDI R19, (1<<CS02)
	OUT TCCR0B, R19
	SEI
MAIN:
	RJMP MAIN
INIC:
	LDI R18, REPEAT
	EOR R16, R17
	OUT PORTD, R16
TIM0_COMPA:
	DEC R18
	BREQ INIC
	RETI
;EOF
